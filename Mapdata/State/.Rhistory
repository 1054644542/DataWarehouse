geom_polygon(aes(x=long,y=lat,group=group),colour="grey",fill="white",size=.2)+
geom_point(data=mynewdata2,aes(x=long,y=lat,size=Count,fill=Count),shape=21,colour="black")+
scale_size_area(max_size=10)+
scale_fill_gradient(low="white",high="#D73434")+
coord_map("polyconic") +
mytheme
p3<-subset(mymapdata,NAME=="Alaska")%>%ggplot()+
geom_polygon(aes(x=long,y=lat,group=group),colour="grey",fill="white",size=.2)+
geom_point(data=mynewdata3,aes(x=long,y=lat,size=Count,fill=Count),shape=21,colour="black")+
scale_size_area(max_size=10)+
scale_fill_gradient(low="white",high="#D73434")+
coord_map("polyconic") +
mytheme
p1<-subset(mymapdata,NAME!='Alaska'& NAME!='Hawaii') %>%ggplot()+
geom_polygon(aes(x=long,y=lat,group=group),colour="grey",fill="white",size=.2)+
geom_point(data=mynewdata1,aes(x=long,y=lat,size=Count,fill=Count),shape=21,colour="black")+
scale_size_area(max_size=10)+
scale_fill_gradient(low="white",high="#D73434")+
coord_map("polyconic") +
mytheme
p1<-subset(mymapdata,NAME!='Alaska'& NAME!='Hawaii') %>%ggplot()+
geom_polygon(aes(x=long,y=lat,group=group),colour="grey",fill="white",size=.2)+
geom_point(data=mynewdata1,aes(x=long,y=lat,size=Count,fill=Count),shape=21,colour="black")+
scale_size_area(max_size=10)+
scale_fill_gradient(low="white",high="#D73434")+
coord_map("polyconic") +
mytheme
p2<-subset(mymapdata,NAME=="Hawaii")%>%ggplot()+
geom_polygon(aes(x=long,y=lat,group=group),colour="grey",fill="white",size=.2)+
geom_point(data=mynewdata2,aes(x=long,y=lat,size=Count,fill=Count),shape=21,colour="black")+
scale_size_area(max_size=10)+
scale_fill_gradient(low="white",high="#D73434")+
coord_map("polyconic") +
mytheme
p3<-subset(mymapdata,NAME=="Alaska")%>%ggplot()+
geom_polygon(aes(x=long,y=lat,group=group),colour="grey",fill="white",size=.2)+
geom_point(data=mynewdata3,aes(x=long,y=lat,size=Count,fill=Count),shape=21,colour="black")+
scale_size_area(max_size=10)+
scale_fill_gradient(low="white",high="#D73434")+
coord_map("polyconic") +
mytheme
p1
vs <- viewport(width=0.12,height=0.12,x=0.33,y=0.17)
print(p2,vp=vs)
vs <- viewport(width=0.25,height=0.25,x=0.22,y=0.18)
print(p3,vp=vs)
mytheme<-theme_map() %+replace% theme(legend.position ="none",plot.background=element_rect(I(0))
mytheme<-theme_map() %+replace% theme(legend.position ="none",plot.background=element_rect(I(0),linetype=0))
p1<-subset(mymapdata,NAME!='Alaska'& NAME!='Hawaii') %>%ggplot()+
geom_polygon(aes(x=long,y=lat,group=group),colour="grey",fill="white",size=.2)+
geom_point(data=mynewdata1,aes(x=long,y=lat,size=Count,fill=Count),shape=21,colour="black")+
scale_size_area(max_size=10)+
scale_fill_gradient(low="white",high="#D73434")+
coord_map("polyconic") +
mytheme
p2<-subset(mymapdata,NAME=="Hawaii")%>%ggplot()+
geom_polygon(aes(x=long,y=lat,group=group),colour="grey",fill="white",size=.2)+
geom_point(data=mynewdata2,aes(x=long,y=lat,size=Count,fill=Count),shape=21,colour="black")+
scale_size_area(max_size=10)+
scale_fill_gradient(low="white",high="#D73434")+
coord_map("polyconic") +
mytheme
p3<-subset(mymapdata,NAME=="Alaska")%>%ggplot()+
geom_polygon(aes(x=long,y=lat,group=group),colour="grey",fill="white",size=.2)+
geom_point(data=mynewdata3,aes(x=long,y=lat,size=Count,fill=Count),shape=21,colour="black")+
scale_size_area(max_size=10)+
scale_fill_gradient(low="white",high="#D73434")+
coord_map("polyconic") +
mytheme
p1
vs <- viewport(width=0.12,height=0.12,x=0.33,y=0.17)
print(p2,vp=vs)
vs <- viewport(width=0.25,height=0.25,x=0.22,y=0.18)
print(p3,vp=vs)
p1
vs <- viewport(width=0.2,height=0.2,x=0.33,y=0.17)
print(p2,vp=vs)
vs <- viewport(width=0.25,height=0.25,x=0.22,y=0.18)
print(p3,vp=vs)
p1
vs <- viewport(width=0.25,height=0.25,x=0.22,y=0.18)
print(p3,vp=vs)
vs <- viewport(width=0.2,height=0.2,x=0.33,y=0.17)
print(p2,vp=vs)
p1
vs <- viewport(width=0.25,height=0.25,x=0.22,y=0.18)
print(p3,vp=vs)
vs <- viewport(width=0.2,height=0.2,x=0.4,y=0.16)
print(p2,vp=vs)
p1
vs <- viewport(width=0.25,height=0.25,x=0.22,y=0.18)
print(p3,vp=vs)
vs <- viewport(width=0.2,height=0.2,x=0.35,y=0.16)
print(p2,vp=vs)
?viewport
subset(mymapdata,NAME=="Hawaii")%>%ggplot()+
geom_polygon(aes(x=long,y=lat,group=group),colour="grey",fill="white",size=.2)+
geom_point(data=mynewdata2,aes(x=long,y=lat,size=Count,fill=Count),shape=21,colour="black")+
scale_size_area(max_size=10)+
scale_fill_gradient(low="white",high="#D73434")+
coord_map("polyconic") +
mytheme
subset(mymapdata,NAME=="Alaska")%>%ggplot()+
geom_polygon(aes(x=long,y=lat,group=group),colour="grey",fill="white",size=.2)+
geom_point(data=mynewdata3,aes(x=long,y=lat,size=Count,fill=Count),shape=21,colour="black")+
scale_size_area(max_size=10)+
scale_fill_gradient(low="white",high="#D73434")+
coord_map("polyconic") +
mytheme
mynewdata
mynewdata1
mynewdata1<-subset(mynewdata,STATE_NAME!='Alaska'& STATE_NAME!='Hawaii')
mynewdata2<-subset(mynewdata,STATE_NAME=="Hawaii")
mynewdata3<-subset(mynewdata,STATE_NAME=="Alaska")
mynewdata1
mynewdata2
mynewdata3
centres <- ddply(mymapdata,.(STATE_ABBR),colwise(midpos,.(long,lat)))
mynewdata<-join(centres,newdata,type="full")
mynewdata1<-subset(mynewdata,STATE_NAME!='Alaska'& STATE_NAME!='Hawaii')
mynewdata2<-subset(mynewdata,STATE_NAME=="Hawaii")
mynewdata3<-subset(mynewdata,STATE_NAME=="Alaska")
centres <- ddply(mymapdata,.(STATE_NAME),colwise(midpos,.(long,lat)))
names(mymapdata)
centres <- ddply(mymapdata,.(NAME),colwise(midpos,.(long,lat)))
mynewdata<-join(centres,newdata,by.x="NAME",by.y="STATE_NAME")
newdata
mynewdata<-merge(centres,newdata,by.x="NAME",by.y="STATE_NAME")
mynewdata1<-subset(mynewdata,STATE_NAME!='Alaska'& STATE_NAME!='Hawaii')
mynewdata2<-subset(mynewdata,STATE_NAME=="Hawaii")
mynewdata3<-subset(mynewdata,STATE_NAME=="Alaska")
mynewdata<-merge(centres,newdata,by.x="NAME",by.y="STATE_NAME")
mynewdata1<-subset(mynewdata,NAME!='Alaska'& NAME!='Hawaii')
mynewdata2<-subset(mynewdata,NAME=="Hawaii")
mynewdata3<-subset(mynewdata,NAME=="Alaska")
p1<-subset(mymapdata,NAME!='Alaska'& NAME!='Hawaii') %>%ggplot()+
geom_polygon(aes(x=long,y=lat,group=group),colour="grey",fill="white",size=.2)+
geom_point(data=mynewdata1,aes(x=long,y=lat,size=Count,fill=Count),shape=21,colour="black")+
scale_size_area(max_size=10)+
scale_fill_gradient(low="white",high="#D73434")+
coord_map("polyconic") +
mytheme
p2<-subset(mymapdata,NAME=="Hawaii")%>%ggplot()+
geom_polygon(aes(x=long,y=lat,group=group),colour="grey",fill="white",size=.2)+
geom_point(data=mynewdata2,aes(x=long,y=lat,size=Count,fill=Count),shape=21,colour="black")+
scale_size_area(max_size=10)+
scale_fill_gradient(low="white",high="#D73434")+
coord_map("polyconic") +
mytheme
p3<-subset(mymapdata,NAME=="Alaska")%>%ggplot()+
geom_polygon(aes(x=long,y=lat,group=group),colour="grey",fill="white",size=.2)+
geom_point(data=mynewdata3,aes(x=long,y=lat,size=Count,fill=Count),shape=21,colour="black")+
scale_size_area(max_size=10)+
scale_fill_gradient(low="white",high="#D73434")+
coord_map("polyconic") +
mytheme
p1
vs <- viewport(width=0.25,height=0.25,x=0.22,y=0.18)
print(p3,vp=vs)
vs <- viewport(width=0.2,height=0.2,x=0.35,y=0.16)
print(p2,vp=vs)
p1
vs <- viewport(width=0.1,height=0.1,x=0.35,y=0.16)
print(p2,vp=vs)
vs <- viewport(width=0.25,height=0.25,x=0.22,y=0.18)
print(p3,vp=vs)
p1
vs <- viewport(width=0.1,height=0.1,x=0.35,y=0.16)
print(p2,vp=vs)
vs <- viewport(width=0.2,height=0.2,x=0.2,y=0.2)
print(p3,vp=vs)
states<-states %>%
filter(NAME!="Puerto Rico") %>%
shift(NAME=="Hawaii",shift_by=c(52.5,5.5))%>%
scale(NAME=="Alaska",scale=0.25,set_to=c(-117,27))%>% filter(lat>20)
American_data<-states %>% merge(newdata,by.x="NAME",by.y="STATE_NAME")
midpos <- function(AD1){mean(range(AD1,na.rm=TRUE))}
centres<- ddply(American_data,.(STATE_ABBR),colwise(midpos,.(long,lat)))
mynewdata<-join(centres,newdata,type="full")
states<-states %>%
filter(NAME!="Puerto Rico") %>%
shift(NAME=="Hawaii",shift_by=c(52.5,5.5))%>%
scale(NAME=="Alaska",scale=0.25,set_to=c(-117,27))%>% filter(lat>20)
American_data<-states %>% merge(newdata,by.x="NAME",by.y="STATE_NAME")
midpos <- function(AD1){mean(range(AD1,na.rm=TRUE))}
centres<- ddply(American_data,.(STATE_ABBR),colwise(midpos,.(long,lat)))
mynewdata<-join(centres,newdata,type="full")
ggplot()+
geom_polygon(data=American_data,aes(x=long,y=lat,group=group),colour="grey",fill="white")+
geom_point(data=mynewdata,aes(x=long,y=lat,size=Count,fill=Count),shape=21,colour="black")+
scale_size_area(max_size=15)+
scale_fill_gradient(low="white",high="#D73434")+
coord_map("polyconic") +
theme_map() %+replace% theme(legend.position ="none")
states<-states %>%
filter(NAME!="Puerto Rico") %>%
shift(NAME=="Hawaii",shift_by=c(52.5,5.5))%>%
scale(NAME=="Alaska",scale=0.25,set_to=c(-117,27))%>% filter(lat>20)
American_data<-states %>% merge(newdata,by.x="NAME",by.y="STATE_NAME")
midpos <- function(AD1){mean(range(AD1,na.rm=TRUE))}
centres<- ddply(American_data,.(STATE_ABBR),colwise(midpos,.(long,lat)))
mynewdata<-join(centres,newdata,type="full")
#美国总统大选各州选举人票数分布：
ggplot()+
geom_polygon(data=American_data,aes(x=long,y=lat,group=group),colour="grey",fill="white")+
geom_point(data=mynewdata,aes(x=long,y=lat,size=Count,fill=Count),shape=21,colour="black")+
scale_size_area(max_size=15)+
scale_fill_gradient(low="white",high="#D73434")+
coord_map("polyconic") +
theme_map() %+replace% theme(legend.position ="none")
rm(list=ls())
newdata<-read.csv("D:/R/File/President.csv",stringsAsFactors=FALSE,check.names=FALSE)
newdata<-read.csv("D:/R/File/President.csv",stringsAsFactors=FALSE,check.names=FALSE)
states<-states %>%
filter(NAME!="Puerto Rico") %>%
shift(NAME=="Hawaii",shift_by=c(52.5,5.5))%>%
scale(NAME=="Alaska",scale=0.25,set_to=c(-117,27))%>% filter(lat>20)
American_data<-states %>% merge(newdata,by.x="NAME",by.y="STATE_NAME")
midpos <- function(AD1){mean(range(AD1,na.rm=TRUE))}
centres<- ddply(American_data,.(STATE_ABBR),colwise(midpos,.(long,lat)))
mynewdata<-join(centres,newdata,type="full")
#美国总统大选各州选举人票数分布：
ggplot()+
geom_polygon(data=American_data,aes(x=long,y=lat,group=group),colour="grey",fill="white")+
geom_point(data=mynewdata,aes(x=long,y=lat,size=Count,fill=Count),shape=21,colour="black")+
scale_size_area(max_size=15)+
scale_fill_gradient(low="white",high="#D73434")+
coord_map("polyconic") +
theme_map() %+replace% theme(legend.position ="none")
library("albersusa")
us_sf <- usa_sf("laea")
us_sf$name<-as.character(us_sf$name)
View(us_sf)
us <- usa_composite()
us_map <- fortify(us,region="name")
mapdata <-usa_composite()%>%fortify(us,region="name")
midpos <- function(AD1){mean(range(AD1,na.rm=TRUE))}
centres<- ddply(mapdata,.(name),colwise(midpos,.(long,lat)))
mynewdata<-join(centres,newdata,type="full")
midpos <- function(AD1){mean(range(AD1,na.rm=TRUE))}
centres<- ddply(mapdata,.(id),colwise(midpos,.(long,lat)))
mynewdata<-merge(centres,newdata)
mynewdata
centres
newdata
mynewdata<-merge(centres,newdata,by.x="id",by.y="STATE_NAME")
mynewdata
ggplot()+
geom_polygon(data=mapdata,aes(x=long,y=lat,group=group),colour="grey",fill="white")+
geom_point(data=mynewdata,aes(x=long,y=lat,size=Count,fill=Count),shape=21,colour="black")+
coord_map("polyconic")+
theme_map()%+replace% theme(legend.position ="none")
ggplot()+
geom_polygon(data=mapdata,aes(x=long,y=lat,group=group),colour="grey",fill="white")+
geom_point(data=mynewdata,aes(x=long,y=lat,size=Count,fill=Count),shape=21,colour="black")+
scale_size_area(max_size=15)+
scale_fill_gradient(low="white",high="#D73434")+
coord_map("polyconic")+
theme_map()%+replace% theme(legend.position ="none")
library(albersusa)
library(sf)
library(sp)
library(rgeos)
library(maptools)
library(ggplot2)
library(ggalt)
library(ggthemes)
library(viridis)
library(scales)
packageVersion("albersusa")
par(mar=c(0,0,1,0))
us_sf <- usa_sf("laea")
View(us_sf)
?usa_sf
plot(us_sf["pop_2012"])
cty_sf <- counties_sf("aeqd")
plot(cty_sf["census_area"])
us <- usa_composite()
dplyr::glimpse(us@data)
?glimpse
plot(us, lwd=0.25)
us <- usa_composite("laea")
plot(us, lwd=0.25)
us <- usa_composite()
us_map <- fortify(us, region="name")
?fortify
gg <- ggplot()
gg <- gg + geom_map(data=us_map, map=us_map,
aes(x=long, y=lat, map_id=id),
color="#2b2b2b", size=0.1, fill=NA)
gg <- gg + theme_map()
gg + coord_map()
gg + coord_map("polyconic")
gg + coord_proj()
gg + coord_proj(us_laea_proj)
gg + coord_proj(us_aeqd_proj)
gg + coord_proj(us_eqdc_proj)
gg +
geom_map(data=us@data, map=us_map,
aes(fill=pop_2014, map_id=name),
color="white", size=0.1) +
coord_proj(us_laea_proj) +
scale_fill_viridis(name="2014 Populaton Estimates", labels=comma) +
theme(legend.position="top",
legend.key.width=unit(3, "lines"))
us <- counties_composite()
dplyr::glimpse(us@data)
plot(us, lwd=0.25)
us <- counties_composite("laea")
plot(us, lwd=0.25)
us <- counties_composite()
us_map <- fortify(us, region="fips")
gg <- ggplot()
gg <- gg + geom_map(data=us_map, map=us_map,
aes(x=long, y=lat, map_id=id),
color="#2b2b2b", size=0.1, fill=NA)
gg <- gg + theme_map()
gg + coord_map()
gg + coord_map("polyconic")
gg + coord_proj()
gg + coord_proj(us_laea_proj)
gg + coord_proj(us_aeqd_proj)
gg + coord_proj(us_eqdc_proj)
gg + coord_proj(us_lcc_proj)
ggplot(mpg, aes(class))+geom_bar()
ggplot(mpg, aes(class))+geom_bar(show.legend= TRUE)
ggplot(mpg, aes(class))+geom_bar(show.legend= FALSE)
ggplot(mpg, aes(class,fill=clsaa))+geom_bar(show.legend= FALSE)
ggplot(mpg, aes(class,fill=clsass))+geom_bar(show.legend= FALSE)
head(mpg)
ggplot(mpg, aes(class,fill=class))+geom_bar(show.legend= FALSE)
ggplot(mpg, aes(class,fill=class))+geom_bar(show.legend= TRUE)
ggplot(mpg, aes(class,fill=class))+geom_bar(show.legend= NA)
ggplot(mpg, aes(class,fill=class))+geom_bar()
?st_transform
library(leaflet)
leaflet() %>% addTiles()
leaflet() %>% addTiles() %>% fitBounds(-73.9, 40.75, -73.95,40.8)
leaflet() %>% addTiles() %>% fitBounds(-73.9, 40.75, -73.95,40.8) %>% addMeasure()
leaflet() %>% addTiles() %>% fitBounds(-73.9, 40.75, -73.95,40.8)
leaflet() %>% addTiles() %>% fitBounds(-73.9, 40.75, -73.95,40.8) %>% addMeasure()
?addMeasure
leaflet() %>% addTiles() %>% setView(0,0,2)
leaflet() %>% addTiles() %>% setView(0,0,2) %>% addGraticule()
leaflet() %>% addTiles() %>% setView(0,0,2) addGraticule(interval = 40, style = list(color = "#FF0000", weight = 1))
leaflet() %>% addTiles() %>% setView(0,0,2) %>%  addGraticule(interval = 40, style = list(color = "#FF0000", weight = 1))
leaflet() %>% addTiles() %>% addTerminator()
map <- leaflet() %>% setView(0,0,3)
map <- leaflet() %>% setView(0,0,3) %>%
addProviderTiles(providers$Esri.WorldStreetMap) %>%
addMiniMap()
map
leaflet() %>% setView(0,0,3)%>%
addProviderTiles(providers$Esri.WorldStreetMap) %>%
addMiniMap(
tiles = providers$Esri.WorldStreetMap,
toggleDisplay = TRUE)
map
library(htmltools)
library(htmlwidgets)
leaflet() %>% addTiles() %>%
addEasyButton(easyButton(
icon="fa-globe", title="Zoom to Level 1",
onClick=JS("function(btn, map){ map.setZoom(1); }"))) %>%
addEasyButton(easyButton(
icon="fa-crosshairs", title="Locate Me",
onClick=JS("function(btn, map){ map.locate({setView: true}); }")))
leaflet() %>% addTiles() %>%
addEasyButton(easyButton(
icon="fa-globe", title="Zoom to Level 1",
onClick=JS("function(btn, map){ map.setZoom(1); }"))) %>%
addEasyButton(easyButton(
icon="fa-crosshairs", title="Locate Me",
onClick=JS("function(btn, map){ map.locate({setView: true}); }")))
leaflet() %>% addTiles() %>%
addEasyButton(easyButton(
icon="fa-globe", title="Zoom to Level 1",
onClick=JS("function(btn, map){ map.setZoom(1); }"))) %>%
addEasyButton(easyButton(
icon="fa-crosshairs", title="Locate Me",
onClick=JS("function(btn, map){ map.locate({setView: true}); }")))
leaflet() %>% addTiles() %>%
addMarkers(data=quakes,
clusterOptions = markerClusterOptions(),
clusterId = "quakesCluster") %>%
addEasyButton(easyButton(
states = list(
easyButtonState(
stateName="unfrozen-markers",
icon="ion-toggle",
title="Freeze Clusters",
onClick = JS("
function(btn, map) {
var clusterManager =
map.layerManager.getLayer('cluster', 'quakesCluster');
clusterManager.freezeAtZoom();
btn.state('frozen-markers');
}")
),
easyButtonState(
stateName="frozen-markers",
icon="ion-toggle-filled",
title="UnFreeze Clusters",
onClick = JS("
function(btn, map) {
var clusterManager =
map.layerManager.getLayer('cluster', 'quakesCluster');
clusterManager.unfreeze();
btn.state('unfrozen-markers');
}")
)
)
))
library("plyr")
library("dplyr")
library("rgdal")
library("sf")
library("ggplot2")
options(stringsAsFactors=FALSE,warn=FALSE,encoding="UTF-8")
setwd("D:/R/rstudy/CHN_adm")
china_map<-readShapePoly("CHN_adm1.shp")
china_map<-readOGR("CHN_adm1.shp",stringsAsFactors=FALSE)
china_map<-st_read("CHN_adm1.shp",stringsAsFactors=FALSE,quiet=TRUE)
library("sp")
View(china_map)
library(maptools)
china_map<-readShapePoly("CHN_adm1.shp")
china_map<-readOGR("CHN_adm1.shp",stringsAsFactors=FALSE)
mydata<-china_map@data
mymapdata<-fortity(china_map)
mymapdata<-fortify(china_map)
View(mydata)
View(mymapdata)
mydata@zhibiao<-runif(32,10,20)
mydata$zhibiao<-runif(32,10,20)
mynewmapdata<-merge(mymapdata[,c(-4,-5)],mydata[,c("ID_1","NAME_1","zhibiao")],by.x="id",by.y="ID_1")
View(mynewmapdata)
library("ggthemes")
ggplot()+
geom_polygon(data=mynewmapdata,aes(x=long,y=lat,group=group,fill=zhibiao),col="grey95")+
scale_fill_gradient(low="white",high="steelblue") +
coord_map("polyconic") +
theme_map()
ggplot(mydata,aes(map_id=ID_1))+
geom_map(aes(fill=zhibiao),map=mymapdata %>% rename(id=region))+
expand_limits(x=mynewmapdata$long,y=mynewmapdata$lat)+
coord_map("polyconic")+
theme_map()
mymapdata2<-mymapdata %>% rename(id=region)
ggplot(mydata,aes(map_id=ID_1))+
geom_map(aes(fill=zhibiao),map=mymapdata %>% rename(id=region))+
expand_limits(x=mynewmapdata$long,y=mynewmapdata$lat)+
coord_map("polyconic")+
theme_map()
？rename
?rename
ggplot(mydata,aes(map_id=ID_1))+
geom_map(aes(fill=zhibiao),map=mymapdata %>% rename(region=id))+
expand_limits(x=mynewmapdata$long,y=mynewmapdata$lat)+
coord_map("polyconic")+
theme_map()
ggplot(mydata,aes(map_id=ID_1))+
geom_map(aes(fill=zhibiao),map=mymapdata %>% rename(region=id))+
scale_fill_gradient(low="white",high="steelblue") +
expand_limits(x=mynewmapdata$long,y=mynewmapdata$lat)+
coord_map("polyconic")+
theme_map()
china_map<-st_read("CHN_adm1.shp",stringsAsFactors=FALSE,quiet=TRUE)
china_map$runif(32,10,20)
china_map$zhibiao<-runif(32,10,20)
ggplot(china_map)+
geom_sf(aes(fill=zhibiao))+
scale_fill_gradient(low="white",high="steelblue") +
coord_map("polyconic") +
theme_map()
?coord_sf
ggplot(china_map)+
geom_sf(aes(fill=zhibiao))+
scale_fill_gradient(low="white",high="steelblue") +
coord_sf()+
theme_map()
coord_sf
china_map <- sf::st_transform(china_map, "+init=epsg:3857")
ggplot(china_map)+
geom_sf(aes(fill=zhibiao))+
scale_fill_gradient(low="white",high="steelblue") +
coord_sf()+
theme_map()
ggplot(china_map)+
geom_sf(aes(fill=zhibiao))+
scale_fill_gradient(low="white",high="steelblue") +
coord_sf()
ggplot(china_map)+
geom_sf(aes(fill=zhibiao))+
coord_sf()+
theme_map()
ggplot(china_map)+
geom_sf(aes(fill=zhibiao))+
scale_fill_gradient(low="white",high="steelblue") +
coord_sf()+
theme_map()
?geom_sf
ggplot(china_map)+
geom_sf(aes(fill=zhibiao),col="grey95")+
scale_fill_gradient(low="white",high="steelblue") +
coord_sf()+
theme_map()
setwd("D:/R/mapdata/State")
geojson1<-geojson_read("china.geojson",simplifyVector=FALSE)
library("geojsonio")
geojson1<-geojson_read("china.geojson",simplifyVector=FALSE)
geojson <-readOGR("china.geojson","OGRGeoJSON",stringsAsFactors=FALSE)
